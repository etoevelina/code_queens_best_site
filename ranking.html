<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>User Ranking â€” EliteFit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="ranking.css" />
</head>
<body>
  <header class="site-header">
    <div class="container nav-wrap">
      <a class="brand" href="home.html"><span class="logo">ðŸ’ª</span><span>EliteFit</span></a>
      <nav aria-label="Main">
        <ul class="nav-list">
          <li><a href="home.html">Home</a></li>
          <li><a href="about.html">About us</a></li>
          <li><a href="programs.html">Programs</a></li>
          <li><a href="team.html">Team</a></li>
          <li><a href="schedule.html">Schedule</a></li>
          <li><a href="plans.html">Plans</a></li>
          <li><a class="active" href="ranking.html" aria-current="page">Ranking</a></li>
        </ul>
      </nav>
      <div class="auth">
        <a class="btn ghost" href="login.html">Login</a>
        <a class="btn primary glow" href="signup.html">Sign up</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero-ranking">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>Elite Fit Center Ranking</h1>
      <p>Track your fitness achievements and rise to the top!</p>
      <a href="#rank-sections" class="btn primary glow">View Rankings</a>
    </div>
  </section>

  <!-- MAIN RANKING -->
  <section class="rank-sections" id="rank-sections">
    <div class="rank-col">
      <section class="panel">
        <h1 class="panel-title mb-3">My Ranking</h1>
        <div class="rank-cards">
          <div class="r-card">
            <span class="r-label">Name</span>
            <span class="r-value">Jane</span>
          </div>
          <div class="r-card">
            <span class="r-label">Surname</span>
            <span class="r-value">Smith</span>
          </div>
          <div class="r-card main">
            <span class="r-label">Ranking</span>
            <span class="r-value">#12</span>
          </div>
          <div class="r-card">
            <span class="r-label">Exercises</span>
            <span class="r-value">245</span>
          </div>
        </div>
      </section>
    </div>

    <div class="rank-col" id="top10">
      <section class="panel">
        <h2 class="panel-title mb-3">Top 10 Users Above Average</h2>
        <div class="table-wrap">
          <table class="table table-dark table-striped table-bordered align-middle rank-table mb-0">
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Ranking</th>
                <th>Completed Exercises</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>1</td><td>John Doe</td><td>#1</td><td>300</td></tr>
              <tr><td>2</td><td>Alice Smith</td><td>#2</td><td>290</td></tr>
              <tr><td>3</td><td>Maria Lee</td><td>#3</td><td>280</td></tr>
              <tr><td>4</td><td>David Kim</td><td>#4</td><td>270</td></tr>
              <tr><td>5</td><td>Samir Ali</td><td>#5</td><td>265</td></tr>
              <tr><td>6</td><td>Nora Park</td><td>#6</td><td>255</td></tr>
              <tr><td>7</td><td>Liam Chen</td><td>#7</td><td>245</td></tr>
              <tr><td>8</td><td>Eva Brown</td><td>#8</td><td>235</td></tr>
              <tr><td>9</td><td>Olivia Cruz</td><td>#9</td><td>225</td></tr>
              <tr><td>10</td><td>Tom Brown</td><td>#10</td><td>220</td></tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </section>

  <!-- DATE & TIME + BACKGROUND CHANGER (Requirement 4 & 5) -->
  <section class="container my-4">
    <div class="panel">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
        <div>
          <h2 class="panel-title mb-1">Current Date &amp; Time</h2>
          <p id="now" aria-live="polite" class="mb-0">Loadingâ€¦</p>
        </div>
        <div class="d-flex gap-2">
          <button id="bg-btn" class="btn btn-light">Change Background</button>
          <button id="bg-reset" class="btn btn-outline-light">Reset</button>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ ACCORDION (Requirement 2) -->
  <section class="container my-4">
    <div class="panel">
      <h2 class="panel-title mb-3">FAQ</h2>

      <div class="accordion" id="faq">
        <div class="accordion-item">
          <h3 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-target="#q1">
              How is ranking calculated?
            </button>
          </h3>
          <div id="q1" class="accordion-collapse">
            <div class="accordion-body">Based on completed exercises, consistency, and activity streak.</div>
          </div>
        </div>

        <div class="accordion-item">
          <h3 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-target="#q2">
              How often is the leaderboard updated?
            </button>
          </h3>
          <div id="q2" class="accordion-collapse">
            <div class="accordion-body">Daily at 00:00 server time.</div>
          </div>
        </div>

        <div class="accordion-item">
          <h3 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-target="#q3">
              Can I improve my rank quickly?
            </button>
          </h3>
          <div id="q3" class="accordion-collapse">
            <div class="accordion-body">Yes: complete more exercises and maintain a daily streak.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- POPUP + FORM VALIDATION (Requirement 1 & 3) -->
  <section class="container my-4">
    <div class="panel">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
        <h2 class="panel-title mb-0">Join EliteFit</h2>
        <button class="btn primary glow" id="open-popup" type="button">Open signup popup</button>
      </div>
      <p class="mb-0 mt-2 opacity-75">This popup includes form validation: required fields, email format, password length, and password confirmation.</p>
    </div>
  </section>

  <!-- Modal-like popup -->
  <div class="popup-backdrop" id="popup" hidden>
    <div class="popup" role="dialog" aria-modal="true" aria-labelledby="popup-title">
      <button class="popup-close" aria-label="Close">Ã—</button>
      <h3 id="popup-title" class="mb-3">Create your account</h3>

      <form id="signup-form" novalidate>
        <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-control" required>
          <div class="invalid-feedback">Please enter a valid email.</div>
        </div>

        <div class="mb-3">
          <label class="form-label">Password <small class="opacity-75">(min 6 chars)</small></label>
          <input type="password" name="password" class="form-control" minlength="6" required>
          <div class="invalid-feedback">Password must be at least 6 characters.</div>
        </div>

        <div class="mb-3">
          <label class="form-label">Confirm password</label>
          <input type="password" name="confirm" class="form-control" required>
          <div class="invalid-feedback">Passwords do not match.</div>
        </div>

        <button class="btn btn-success" type="submit">Create account</button>
        <p class="text-danger small mt-2" data-error hidden></p>
        <p class="text-success small mt-2" data-success hidden></p>
      </form>
    </div>
  </div>

  <footer class="site-footer">
    <ul>
      <li>Evelina</li>
      <li>Aknur</li>
      <li>Meruert</li>
      <li>Birkhanym</li>
    </ul>
  </footer>

  <!-- PAGE-LOCAL JS ONLY -->
  <script>
    // ---------- 1) DATE & TIME ----------
    function formatNow(d = new Date()) {
      return d.toLocaleString(undefined, { dateStyle: 'long', timeStyle: 'short' });
    }
    const nowEl = document.getElementById('now');
    if (nowEl) {
      nowEl.textContent = formatNow();
      setInterval(() => (nowEl.textContent = formatNow()), 60_000);
    }

    // ---------- 2) BACKGROUND COLOR CHANGER ----------
    const bgBtn = document.getElementById('bg-btn');
    const bgReset = document.getElementById('bg-reset');
    const originalBg = getComputedStyle(document.body).backgroundColor;
    const palette = ['#0f1530','#111836','#0a0f12','#151c3d','#1a1f3f','#0e142c'];

    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
    if (bgBtn) {
      bgBtn.addEventListener('click', () => {
        document.body.style.backgroundColor = pick(palette);
      });
    }
    if (bgReset) {
      bgReset.addEventListener('click', () => {
        document.body.style.backgroundColor = originalBg || '';
      });
    }

    // ---------- 3) ACCORDION ----------
    function collapse(el){ el.style.maxHeight = '0px'; el.setAttribute('aria-hidden', 'true'); }
    function expand(el){ el.style.maxHeight = el.scrollHeight + 'px'; el.setAttribute('aria-hidden', 'false'); }

    document.querySelectorAll('.accordion-button').forEach(btn => {
      const sel = btn.getAttribute('data-target');
      const panel = document.querySelector(sel);
      if (!panel) return;

      // hide by default
      collapse(panel);

      btn.addEventListener('click', () => {
        const open = panel.style.maxHeight && panel.style.maxHeight !== '0px';
        btn.classList.toggle('collapsed', open); // keep "collapsed" when closing
        if (open) collapse(panel); else expand(panel);
      });
    });

    // Recalculate on resize to keep smooth height
    window.addEventListener('resize', () => {
      document.querySelectorAll('.accordion-collapse').forEach(p => {
        if (p.style.maxHeight && p.style.maxHeight !== '0px') {
          p.style.maxHeight = p.scrollHeight + 'px';
        }
      });
    });

    // ---------- 4) POPUP OPEN/CLOSE ----------
    const popup = document.getElementById('popup');
    const openBtn = document.getElementById('open-popup');

    function openPopup(){
      popup.hidden = false;
      document.body.style.overflow = 'hidden';
      // focus first input for accessibility
      const first = popup.querySelector('input');
      if (first) first.focus();
    }
    function closePopup(){
      popup.hidden = true;
      document.body.style.overflow = '';
    }

    if (popup && openBtn) {
      const closeBtn = popup.querySelector('.popup-close');
      openBtn.addEventListener('click', openPopup);
      closeBtn.addEventListener('click', closePopup);
      popup.addEventListener('click', (e) => { if (e.target === popup) closePopup(); });
      window.addEventListener('keydown', (e) => { if (!popup.hidden && e.key === 'Escape') closePopup(); });
    }

    // ---------- 5) FORM VALIDATION ----------
    const form = document.getElementById('signup-form');
    if (form) {
      const errMsg = form.querySelector('[data-error]');
      const okMsg = form.querySelector('[data-success]');

      function showError(msg){
        if (okMsg) { okMsg.hidden = true; okMsg.textContent = ''; }
        if (errMsg) { errMsg.hidden = !msg; errMsg.textContent = msg || ''; }
      }
      function showSuccess(msg){
        if (errMsg) { errMsg.hidden = true; errMsg.textContent = ''; }
        if (okMsg) { okMsg.hidden = !msg; okMsg.textContent = msg || ''; }
      }
      function emailValid(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = form.elements.email.value.trim();
        const pass  = form.elements.password.value;
        const conf  = form.elements.confirm.value;

        // reset Bootstrap-like validation hints
        form.querySelectorAll('input').forEach(i => i.classList.remove('is-invalid'));

        if (!emailValid(email)) {
          form.elements.email.classList.add('is-invalid');
          return showError('Please enter a valid email address.');
        }
        if (pass.length < 6) {
          form.elements.password.classList.add('is-invalid');
          return showError('Password must be at least 6 characters.');
        }
        if (pass !== conf) {
          form.elements.confirm.classList.add('is-invalid');
          return showError('Passwords do not match.');
        }

        showError('');
        showSuccess('Signed up successfully! (demo)');
        form.reset();
      });
    }
  </script>
</body>
</html>
